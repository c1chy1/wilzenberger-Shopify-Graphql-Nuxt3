{
  "version": 3,
  "sources": ["../../@shopify/theme-images/images.js"],
  "sourcesContent": ["/**\n * Image Helper Functions\n * -----------------------------------------------------------------------------\n * https://github.com/Shopify/slate.git.\n *\n */\n\n/**\n * Preloads an image in memory and uses the browsers cache to store it until needed.\n *\n * @param {Array} images - A list of image urls\n * @param {String} size - A shopify image size attribute\n */\n\nexport function preload(images, size) {\n  if (typeof images === 'string') {\n    images = [images];\n  }\n\n  for (let i = 0; i < images.length; i++) {\n    const image = images[i];\n    loadImage(getSizedImageUrl(image, size));\n  }\n}\n\n/**\n * Loads and caches an image in the browsers cache.\n * @param {string} path - An image url\n */\nexport function loadImage(path) {\n  new Image().src = path;\n}\n\n/**\n * Find the Shopify image attribute size\n *\n * @param {string} src\n * @returns {null}\n */\nexport function imageSize(src) {\n  const match = src.match(\n    /.+_((?:pico|icon|thumb|small|compact|medium|large|grande)|\\d{1,4}x\\d{0,4}|x\\d{1,4})[_\\.@]/\n  );\n\n  if (match) {\n    return match[1];\n  } else {\n    return null;\n  }\n}\n\n/**\n * Adds a Shopify size attribute to a URL\n *\n * @param src\n * @param size\n * @returns {*}\n */\nexport function getSizedImageUrl(src, size) {\n  if (size === null) {\n    return src;\n  }\n\n  if (size === 'master') {\n    return removeProtocol(src);\n  }\n\n  const match = src.match(/\\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\\?v=\\d+)?$/i);\n\n  if (match) {\n    const prefix = src.split(match[0]);\n    const suffix = match[0];\n\n    return removeProtocol(`${prefix[0]}_${size}${suffix}`);\n  } else {\n    return null;\n  }\n}\n\nexport function removeProtocol(path) {\n  return path.replace(/http(s)?:/, '');\n}\n"],
  "mappings": ";;;AAcO,SAAS,QAAQ,QAAQ,MAAM;AACpC,MAAI,OAAO,WAAW,UAAU;AAC9B,aAAS,CAAC,MAAM;AAAA,EAClB;AAEA,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,UAAM,QAAQ,OAAO;AACrB,cAAU,iBAAiB,OAAO,IAAI,CAAC;AAAA,EACzC;AACF;AAMO,SAAS,UAAU,MAAM;AAC9B,MAAI,MAAM,EAAE,MAAM;AACpB;AAQO,SAAS,UAAU,KAAK;AAC7B,QAAM,QAAQ,IAAI;AAAA,IAChB;AAAA,EACF;AAEA,MAAI,OAAO;AACT,WAAO,MAAM;AAAA,EACf,OAAO;AACL,WAAO;AAAA,EACT;AACF;AASO,SAAS,iBAAiB,KAAK,MAAM;AAC1C,MAAI,SAAS,MAAM;AACjB,WAAO;AAAA,EACT;AAEA,MAAI,SAAS,UAAU;AACrB,WAAO,eAAe,GAAG;AAAA,EAC3B;AAEA,QAAM,QAAQ,IAAI,MAAM,sDAAsD;AAE9E,MAAI,OAAO;AACT,UAAM,SAAS,IAAI,MAAM,MAAM,EAAE;AACjC,UAAM,SAAS,MAAM;AAErB,WAAO,eAAe,GAAG,OAAO,MAAM,OAAO,QAAQ;AAAA,EACvD,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAEO,SAAS,eAAe,MAAM;AACnC,SAAO,KAAK,QAAQ,aAAa,EAAE;AACrC;",
  "names": []
}
